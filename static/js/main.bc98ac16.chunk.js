(this["webpackJsonpyelp-itc"]=this["webpackJsonpyelp-itc"]||[]).push([[0],{104:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var a,r,i,s,c,o,u,l,p,m,d=n(0),b=n.n(d),h=n(9),f=n.n(h),g=(n(104),n(31)),v=n(175),E=n(174),y=n(13),j=n.n(y),O=n(21),w=n(36),x=n(37),k=n(160),S=n(164),_=n(178),L=n(167),z=n(168),B=n(169),I=n(170),T=n(28),M=n(181),C=n(86),D=n.n(C),P=n(25),W=n(43),F=n(26),N=(n(67),n(8)),R=(a=function e(t){Object(W.a)(this,e),this.stores=void 0,Object(P.a)(this,"searchBusinesses",r,this),Object(P.a)(this,"getBusinessDetails",i,this),this.stores=t},r=Object(F.a)(a.prototype,"searchBusinesses",[N.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(function(){var t=Object(O.a)(j.a.mark((function t(n){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stores.setIsLoading(!0),t.prev=1,t.next=4,e.stores.api.get("https://cz35iek.builtwithdark.com/api.yelp.com/v3/businesses/search?term=".concat(n));case 4:return a=t.sent,t.abrupt("return",a.data.body.businesses);case 8:throw t.prev=8,t.t0=t.catch(1),console.log(t.t0),Object(N.g)((function(){e.stores.setError(t.t0.toString())})),t.t0;case 13:return t.prev=13,Object(N.g)((function(){e.stores.setIsLoading(!1)})),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,8,13,16]])})));return function(e){return t.apply(this,arguments)}}())}}),i=Object(F.a)(a.prototype,"getBusinessDetails",[N.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(function(){var t=Object(O.a)(j.a.mark((function t(n){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stores.setIsLoading(!0),t.prev=1,t.next=4,e.stores.api.get("https://cz35iek.builtwithdark.com/api.yelp.com/v3/businesses/".concat(n));case 4:return a=t.sent,t.abrupt("return",a.data.body);case 8:throw t.prev=8,t.t0=t.catch(1),console.log(t.t0),Object(N.g)((function(){e.stores.setError(t.t0.toString())})),t.t0;case 13:return t.prev=13,Object(N.g)((function(){e.stores.setIsLoading(!1)})),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,8,13,16]])})));return function(e){return t.apply(this,arguments)}}())}}),a),q=function e(t){var n=this;Object(W.a)(this,e),this.stores=void 0,this.getReviews=function(){var e=Object(O.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.stores.setIsLoading(!0),e.prev=1,e.next=4,n.stores.api.get("https://cz35iek.builtwithdark.com/api.yelp.com/v3/businesses/".concat(t,"/reviews"));case 4:return a=e.sent,e.abrupt("return",a.data.body.reviews);case 8:throw e.prev=8,e.t0=e.catch(1),console.log(e.t0),Object(N.g)((function(){n.stores.setError(e.t0.toString())})),e.t0;case 13:return e.prev=13,Object(N.g)((function(){n.stores.setIsLoading(!1)})),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,8,13,16]])})));return function(t){return e.apply(this,arguments)}}(),this.stores=t},A=n(78),J=n.n(A),V=new(s=function e(){Object(W.a)(this,e),Object(P.a)(this,"isLoading",c,this),Object(P.a)(this,"isError",o,this),Object(P.a)(this,"errorMessage",u,this),this.api=void 0,this.businessStore=void 0,this.reviewsStore=void 0,Object(P.a)(this,"setIsLoading",l,this),Object(P.a)(this,"setError",p,this),Object(P.a)(this,"clearError",m,this),this.businessStore=new R(this),this.reviewsStore=new q(this),this.api=J.a.create()},c=Object(F.a)(s.prototype,"isLoading",[N.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=Object(F.a)(s.prototype,"isError",[N.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=Object(F.a)(s.prototype,"errorMessage",[N.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=Object(F.a)(s.prototype,"setIsLoading",[N.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.isLoading=t}}}),p=Object(F.a)(s.prototype,"setError",[N.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.isError=!0,e.errorMessage=t}}}),m=Object(F.a)(s.prototype,"clearError",[N.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isError=!1,e.errorMessage=""}}}),s),$=n(44),H=n(32),K=n(88),U=n.n(K);function G(){var e=Object(g.a)(["\n  min-height: 282px;\n  margin: 0 10px 10px 0;\n  text-align: center;\n"]);return G=function(){return e},e}function Q(){var e=Object(g.a)(["\n  flex-grow: 1;\n  margin-top: 10px;\n"]);return Q=function(){return e},e}var X=Object(H.a)(k.a)(Q()),Y=Object(H.a)(S.a)(G()),Z=Object($.a)((function(){var e=Object(d.useState)([]),t=Object(w.a)(e,2),n=t[0],a=t[1],r=new URLSearchParams(Object(x.g)().search).get("query"),i=Object(d.useState)(r||""),s=Object(w.a)(i,2),c=s[0],o=s[1],u=Object(d.useState)(!1),l=Object(w.a)(u,2),p=l[0],m=l[1],h=Object(x.f)();Object(d.useEffect)((function(){Object(O.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,V.businessStore.searchBusinesses(r);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[r]);var f=function(e){return/^[a-z0-9\s]+$/i.test(e)},g=function(){c&&!p&&h.push("/?query=".concat(c))};return b.a.createElement(b.a.Fragment,null,b.a.createElement(_.a,{style:{width:"100%",marginTop:10,color:"red"},label:"search",onBlur:g,onChange:function(e){m(!f(e.currentTarget.value)),o(e.currentTarget.value)},onKeyPress:function(e){"Enter"===e.key&&g()},value:c,InputProps:{endAdornment:b.a.createElement(L.a,{position:"end"},b.a.createElement(D.a,null))},error:p,helperText:p?"Incorrect entry.":""}),b.a.createElement(X,{container:!0},n.map((function(e){return b.a.createElement(k.a,{item:!0,key:e.id},b.a.createElement(Y,null,b.a.createElement(z.a,{onClick:function(){return h.push("/business/".concat(e.id))}},e.image_url?b.a.createElement(B.a,{image:e.image_url,title:e.name,style:{height:140}}):b.a.createElement(U.a,{style:{width:"140px",height:"100%"}}),b.a.createElement(I.a,null,b.a.createElement(T.a,{gutterBottom:!0,variant:"h5",component:"h2"},e.name),b.a.createElement(T.a,{variant:"body2",color:"textSecondary",component:"p"},e.price&&"price:".concat(e.price," "),e.display_phone&&"phone:".concat(e.display_phone)),b.a.createElement(M.a,{defaultValue:e.rating,precision:.5,readOnly:!0}),e.review_count>0&&b.a.createElement(T.a,{variant:"body2",color:"textSecondary",component:"p"},e.review_count," ",1===e.review_count?"review":"reviews")))))})),0===n.length&&!V.isLoading&&b.a.createElement(T.a,{variant:"h5"},r?"No results found":"Type to search for business")))})),ee=n(166),te=n(171),ne=n(172),ae=function(e){return b.a.createElement(ee.a,{dense:!0,disablePadding:!0},b.a.createElement(te.a,null,b.a.createElement(ne.a,{primary:"rating",secondary:b.a.createElement(M.a,{defaultValue:null===e||void 0===e?void 0:e.rating,readOnly:!0,precision:.5,size:"medium"})})),(null===e||void 0===e?void 0:e.price)&&b.a.createElement(te.a,null,b.a.createElement(ne.a,{primary:"price",secondary:null===e||void 0===e?void 0:e.price})),(null===e||void 0===e?void 0:e.display_phone)&&b.a.createElement(te.a,null,b.a.createElement(ne.a,{primary:"phone",secondary:null===e||void 0===e?void 0:e.display_phone})),b.a.createElement(te.a,null,b.a.createElement(ne.a,{primary:"address",secondary:null===e||void 0===e?void 0:e.location.display_address.join(", ")})),b.a.createElement(te.a,null,b.a.createElement(ne.a,{primary:"categories",secondary:null===e||void 0===e?void 0:e.categories.map((function(e){return e.title})).join(", ")})))},re=n(182),ie=n(173),se=Object($.a)((function(){var e,t=null===(e=Object(x.h)("/business/:id"))||void 0===e?void 0:e.params.id,n=V.reviewsStore;Object(d.useEffect)((function(){Object(O.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,n.getReviews(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[t,n]);var a=Object(d.useState)([]),r=Object(w.a)(a,2),i=r[0],s=r[1];return b.a.createElement(X,{container:!0,spacing:2},i.map((function(e){return b.a.createElement(k.a,{item:!0,key:e.id},b.a.createElement(S.a,{style:{maxWidth:345}},b.a.createElement(ie.a,{avatar:b.a.createElement(re.a,{src:e.user.image_url,alt:e.user.name}),title:e.user.name,subheader:e.time_created}),b.a.createElement(I.a,null,b.a.createElement(T.a,{variant:"body2",color:"textSecondary",component:"p"},e.text))))})))}));function ce(){var e=Object(g.a)(["\n  max-height: 300px;\n  text-align: 'center';\n"]);return ce=function(){return e},e}var oe=H.a.img(ce()),ue=function(e){var t;return b.a.createElement(k.a,{container:!0,spacing:2},null===(t=e.photos)||void 0===t?void 0:t.map((function(t){return b.a.createElement(k.a,{item:!0,key:t},b.a.createElement(oe,{alt:e.name,src:t}))})))},le=function(){var e,t=null===(e=Object(x.h)("/business/:id"))||void 0===e?void 0:e.params.id,n=Object(d.useState)(),a=Object(w.a)(n,2),r=a[0],i=a[1],s=V.businessStore;return Object(d.useEffect)((function(){Object(O.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i,e.next=3,s.getBusinessDetails(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[s,t]),r?b.a.createElement(b.a.Fragment,null,b.a.createElement(T.a,{variant:"h4",style:{marginTop:10},align:"left",gutterBottom:!0},r.name),b.a.createElement(ue,r),b.a.createElement(ae,r),b.a.createElement(se,null)):V.isLoading?b.a.createElement(b.a.Fragment,null):b.a.createElement(T.a,{variant:"h4",style:{marginTop:10}},"Not found")},pe=n(176),me=n(183),de=n(177),be=n(180),he=n(179);function fe(){var e=Object(g.a)(["\n  background-image: url(https://s3-media1.fl.yelpcdn.com/assets/srv0/yelp_design_web/48792dd29811/assets/img/logos_desktop/default.png);\n  background-size: 80px 40px;\n  width: 80px;\n  height: 50px;\n  background-repeat: no-repeat;\n  margin-top: 8px;\n"]);return fe=function(){return e},e}function ge(){var e=Object(g.a)(["\n  background: #d32323 url(https://s3-media4.fl.yelpcdn.com/assets/srv0/yelp_styleguide/c146b0884f6a/assets/img/structural/header_stars.png)\n    no-repeat center;\n"]);return ge=function(){return e},e}var ve=Object(H.a)(E.a)(ge()),Ee=H.a.div(fe()),ye=Object($.a)((function(){return b.a.createElement("div",{className:"App"},b.a.createElement(v.a,{position:"static"},b.a.createElement(ve,null,b.a.createElement(Ee,null))),b.a.createElement(pe.a,{maxWidth:"xl"},b.a.createElement(x.c,null,b.a.createElement(x.a,{path:"/",exact:!0},b.a.createElement(Z,null)),b.a.createElement(x.a,{path:"/business/:id?"},b.a.createElement(le,null))),b.a.createElement(me.a,{open:V.isLoading},b.a.createElement(de.a,{style:{color:"#d32323"}}))),b.a.createElement(be.a,{open:V.isError,autoHideDuration:6e3,onClose:V.clearError},b.a.createElement(he.a,{onClose:V.clearError,severity:"error"},V.errorMessage)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var je=n(42);f.a.render(b.a.createElement(je.a,{basename:"/"},b.a.createElement(ye,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,t,n){e.exports=n(127)}},[[99,1,2]]]);
//# sourceMappingURL=main.bc98ac16.chunk.js.map