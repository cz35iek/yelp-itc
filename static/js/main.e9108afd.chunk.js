(this["webpackJsonpyelp-itc"]=this["webpackJsonpyelp-itc"]||[]).push([[0],{104:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var a,r,i,c,s,o,u,l,p,m,d=n(0),b=n.n(d),h=n(9),f=n.n(h),v=(n(104),n(21)),g=n(175),E=n(174),y=n(13),j=n.n(y),O=n(22),w=n(36),x=n(37),k=n(164),S=n(178),_=n(170),z=n(30),L=n(88),I=n.n(L),B=n(27),T=n(44),M=n(28),C=(n(67),n(8)),D=(a=function e(t){Object(T.a)(this,e),this.stores=void 0,Object(B.a)(this,"searchBusinesses",r,this),Object(B.a)(this,"getBusinessDetails",i,this),this.stores=t},r=Object(M.a)(a.prototype,"searchBusinesses",[C.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(function(){var t=Object(O.a)(j.a.mark((function t(n){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stores.setIsLoading(!0),t.prev=1,t.next=4,e.stores.api.get("https://cz35iek.builtwithdark.com/api.yelp.com/v3/businesses/search?term=".concat(n));case 4:return a=t.sent,t.abrupt("return",a.data.body.businesses);case 8:throw t.prev=8,t.t0=t.catch(1),console.log(t.t0),Object(C.g)((function(){e.stores.setError(t.t0.toString())})),t.t0;case 13:return t.prev=13,Object(C.g)((function(){e.stores.setIsLoading(!1)})),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,8,13,16]])})));return function(e){return t.apply(this,arguments)}}())}}),i=Object(M.a)(a.prototype,"getBusinessDetails",[C.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(function(){var t=Object(O.a)(j.a.mark((function t(n){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stores.setIsLoading(!0),t.prev=1,t.next=4,e.stores.api.get("https://cz35iek.builtwithdark.com/api.yelp.com/v3/businesses/".concat(n));case 4:return a=t.sent,t.abrupt("return",a.data.body);case 8:throw t.prev=8,t.t0=t.catch(1),console.log(t.t0),Object(C.g)((function(){e.stores.setError(t.t0.toString())})),t.t0;case 13:return t.prev=13,Object(C.g)((function(){e.stores.setIsLoading(!1)})),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,8,13,16]])})));return function(e){return t.apply(this,arguments)}}())}}),a),P=function e(t){var n=this;Object(T.a)(this,e),this.stores=void 0,this.getReviews=function(){var e=Object(O.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.stores.setIsLoading(!0),e.prev=1,e.next=4,n.stores.api.get("https://cz35iek.builtwithdark.com/api.yelp.com/v3/businesses/".concat(t,"/reviews"));case 4:return a=e.sent,e.abrupt("return",a.data.body.reviews);case 8:throw e.prev=8,e.t0=e.catch(1),console.log(e.t0),Object(C.g)((function(){n.stores.setError(e.t0.toString())})),e.t0;case 13:return e.prev=13,Object(C.g)((function(){n.stores.setIsLoading(!1)})),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,8,13,16]])})));return function(t){return e.apply(this,arguments)}}(),this.stores=t},W=n(78),F=n.n(W),N=new(c=function e(){Object(T.a)(this,e),Object(B.a)(this,"isLoading",s,this),Object(B.a)(this,"isError",o,this),Object(B.a)(this,"errorMessage",u,this),this.api=void 0,this.businessStore=void 0,this.reviewsStore=void 0,Object(B.a)(this,"setIsLoading",l,this),Object(B.a)(this,"setError",p,this),Object(B.a)(this,"clearError",m,this),this.businessStore=new D(this),this.reviewsStore=new P(this),this.api=F.a.create()},s=Object(M.a)(c.prototype,"isLoading",[C.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=Object(M.a)(c.prototype,"isError",[C.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=Object(M.a)(c.prototype,"errorMessage",[C.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=Object(M.a)(c.prototype,"setIsLoading",[C.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.isLoading=t}}}),p=Object(M.a)(c.prototype,"setError",[C.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.isError=!0,e.errorMessage=t}}}),m=Object(M.a)(c.prototype,"clearError",[C.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isError=!1,e.errorMessage=""}}}),c),R=n(45),q=n(23),A=n(160),J=n(165),V=n(166),$=n(167),H=n(183),K=n(85),U=n.n(K);function G(){var e=Object(v.a)(["\n  min-height: 282px;\n  width: 330px;\n  margin: 0 0px 10px 0;\n  text-align: center;\n"]);return G=function(){return e},e}var Q=Object(q.a)(A.a)(G()),X=function(e){var t=Object(x.f)();return b.a.createElement(k.a,{item:!0,key:e.id},b.a.createElement(Q,null,b.a.createElement(J.a,{onClick:function(){return t.push("/business/".concat(e.id))}},e.image_url?b.a.createElement(V.a,{image:e.image_url,title:e.name,style:{height:140}}):b.a.createElement(U.a,{style:{width:"140px",height:"100%"}}),b.a.createElement($.a,null,b.a.createElement(z.a,{gutterBottom:!0,variant:"h5",component:"h2"},e.name),b.a.createElement(z.a,{variant:"body2",color:"textSecondary",component:"p"},e.price&&"price:".concat(e.price," "),e.display_phone&&"phone:".concat(e.display_phone)),b.a.createElement(H.a,{defaultValue:e.rating,precision:.5,readOnly:!0}),e.review_count>0&&b.a.createElement(z.a,{variant:"body2",color:"textSecondary",component:"p"},e.review_count," ",1===e.review_count?"review":"reviews")))))};function Y(){var e=Object(v.a)(["\n  flex-grow: 1;\n  margin-top: 10px;\n  justify-content: space-evenly;\n"]);return Y=function(){return e},e}var Z=Object(q.a)(k.a)(Y()),ee=Object(R.a)((function(){var e=Object(d.useState)([]),t=Object(w.a)(e,2),n=t[0],a=t[1],r=new URLSearchParams(Object(x.g)().search).get("query"),i=Object(d.useState)(r||""),c=Object(w.a)(i,2),s=c[0],o=c[1],u=Object(d.useState)(!1),l=Object(w.a)(u,2),p=l[0],m=l[1],h=Object(x.f)();Object(d.useEffect)((function(){Object(O.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,N.businessStore.searchBusinesses(r);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[r]);var f=function(e){return/^[a-z0-9\s]+$/i.test(e)},v=function(){s&&!p&&h.push("/?query=".concat(s))};return b.a.createElement(b.a.Fragment,null,b.a.createElement(S.a,{style:{width:"100%",marginTop:10},label:"search",onBlur:v,onChange:function(e){m(!f(e.currentTarget.value)),o(e.currentTarget.value)},onKeyPress:function(e){"Enter"===e.key&&v()},value:s,InputProps:{endAdornment:b.a.createElement(_.a,{position:"end"},b.a.createElement(I.a,null))},error:p,helperText:p?"Incorrect entry.":""}),b.a.createElement(Z,{container:!0},n.map((function(e){return b.a.createElement(X,e)})),0===n.length&&!N.isLoading&&b.a.createElement(z.a,{variant:"h5"},r?"No results found":"Type to search for business")))})),te=n(169),ne=n(171),ae=n(172),re=function(e){return b.a.createElement(te.a,{dense:!0,disablePadding:!0},b.a.createElement(ne.a,null,b.a.createElement(ae.a,{primary:"rating",secondary:b.a.createElement(H.a,{defaultValue:null===e||void 0===e?void 0:e.rating,readOnly:!0,precision:.5,size:"medium"})})),(null===e||void 0===e?void 0:e.price)&&b.a.createElement(ne.a,null,b.a.createElement(ae.a,{primary:"price",secondary:null===e||void 0===e?void 0:e.price})),(null===e||void 0===e?void 0:e.display_phone)&&b.a.createElement(ne.a,null,b.a.createElement(ae.a,{primary:"phone",secondary:null===e||void 0===e?void 0:e.display_phone})),b.a.createElement(ne.a,null,b.a.createElement(ae.a,{primary:"address",secondary:null===e||void 0===e?void 0:e.location.display_address.join(", ")})),b.a.createElement(ne.a,null,b.a.createElement(ae.a,{primary:"categories",secondary:null===e||void 0===e?void 0:e.categories.map((function(e){return e.title})).join(", ")})))},ie=n(181),ce=n(173);function se(){var e=Object(v.a)(["\n  flex-grow: 1;\n  margin-top: 10px;\n"]);return se=function(){return e},e}var oe=Object(q.a)(k.a)(se()),ue=Object(R.a)((function(){var e,t=null===(e=Object(x.h)("/business/:id"))||void 0===e?void 0:e.params.id,n=N.reviewsStore;Object(d.useEffect)((function(){Object(O.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,n.getReviews(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[t,n]);var a=Object(d.useState)([]),r=Object(w.a)(a,2),i=r[0],c=r[1];return b.a.createElement(oe,{container:!0,spacing:2},i.map((function(e){return b.a.createElement(k.a,{item:!0,key:e.id},b.a.createElement(A.a,{style:{maxWidth:345}},b.a.createElement(ce.a,{avatar:b.a.createElement(ie.a,{src:e.user.image_url,alt:e.user.name}),title:e.user.name,subheader:e.time_created}),b.a.createElement($.a,null,b.a.createElement(z.a,{variant:"body2",color:"textSecondary",component:"p"},e.text))))})))}));function le(){var e=Object(v.a)(["\n  max-height: 300px;\n  max-width: 90vw;\n"]);return le=function(){return e},e}var pe=q.a.img(le()),me=function(e){var t;return b.a.createElement(k.a,{container:!0,spacing:2},null===(t=e.photos)||void 0===t?void 0:t.map((function(t){return b.a.createElement(k.a,{item:!0,key:t},b.a.createElement(pe,{alt:e.name,src:t}))})))},de=function(){var e,t=null===(e=Object(x.h)("/business/:id"))||void 0===e?void 0:e.params.id,n=Object(d.useState)(),a=Object(w.a)(n,2),r=a[0],i=a[1],c=N.businessStore;return Object(d.useEffect)((function(){Object(O.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i,e.next=3,c.getBusinessDetails(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[c,t]),r?b.a.createElement(b.a.Fragment,null,b.a.createElement(z.a,{variant:"h4",style:{marginTop:10},align:"left",gutterBottom:!0},r.name),b.a.createElement(me,r),b.a.createElement(re,r),b.a.createElement(ue,null)):N.isLoading?b.a.createElement(b.a.Fragment,null):b.a.createElement(z.a,{variant:"h4",style:{marginTop:10}},"Not found")},be=n(176),he=n(182),fe=n(177),ve=n(180),ge=n(179);function Ee(){var e=Object(v.a)(["\n  background-image: url(https://s3-media1.fl.yelpcdn.com/assets/srv0/yelp_design_web/48792dd29811/assets/img/logos_desktop/default.png);\n  background-size: 80px 40px;\n  width: 80px;\n  height: 50px;\n  background-repeat: no-repeat;\n  margin-top: 8px;\n"]);return Ee=function(){return e},e}function ye(){var e=Object(v.a)(["\n  background: #d32323 url(https://s3-media4.fl.yelpcdn.com/assets/srv0/yelp_styleguide/c146b0884f6a/assets/img/structural/header_stars.png)\n    no-repeat center;\n"]);return ye=function(){return e},e}var je=Object(q.a)(E.a)(ye()),Oe=q.a.div(Ee()),we=Object(R.a)((function(){return b.a.createElement("div",{className:"App"},b.a.createElement(g.a,{position:"static"},b.a.createElement(je,null,b.a.createElement(Oe,null))),b.a.createElement(be.a,{maxWidth:"xl"},b.a.createElement(x.c,null,b.a.createElement(x.a,{path:"/",exact:!0},b.a.createElement(ee,null)),b.a.createElement(x.a,{path:"/business/:id?"},b.a.createElement(de,null))),b.a.createElement(he.a,{open:N.isLoading,style:{zIndex:1}},b.a.createElement(fe.a,{style:{color:"#d32323"}}))),b.a.createElement(ve.a,{open:N.isError,autoHideDuration:6e3,onClose:N.clearError},b.a.createElement(ge.a,{onClose:N.clearError,severity:"error"},N.errorMessage)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var xe=n(40);f.a.render(b.a.createElement(xe.a,{basename:"/"},b.a.createElement(we,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,t,n){e.exports=n(127)}},[[99,1,2]]]);
//# sourceMappingURL=main.e9108afd.chunk.js.map